---
- name: Include distribution and version-specific vars.
  ansible.builtin.include_vars: "{{ item }}"
  with_first_found:
    - files:
        - "{{ ansible_distribution }}-{{ ansible_distribution_major_version }}.yml"
      skip: true

- name: Set the default PHP version.
  ansible.builtin.set_fact:
    php_default_version_debian: "{{ __php_default_version_debian }}"
  when: php_default_version_debian is not defined and ansible_os_family == 'Debian'

- name: Install PHP packages
  ansible.builtin.package:
    name: "{{ item }}"
    state: present
  loop: "{{ php_packages }}"
  notify: Restart Webserver

- name: Cron task to remove MAILTO
  ansible.builtin.lineinfile:
    dest: "/etc/cron.d/php"
    line: "MAILTO=\"\""
    state: present
